const h={query:f,get:a,post:c,put:s,remove:u,save:t};function f(n,r=500){var o=JSON.parse(localStorage.getItem(n))||[];return new Promise(e=>setTimeout(()=>e(o),r))}function a(n,r){return f(n).then(o=>{const e=o.find(i=>i._id===r);if(!e)throw new Error(`Get failed, cannot find entity with id: ${r} in: ${n}`);return e})}function c(n,r){return r=JSON.parse(JSON.stringify(r)),r._id=d(),f(n).then(o=>(o.push(r),t(n,o),r))}function s(n,r){return r=JSON.parse(JSON.stringify(r)),f(n).then(o=>{const e=o.findIndex(i=>i._id===r._id);if(e<0)throw new Error(`Update failed, cannot find entity with id: ${entityId} in: ${n}`);return o.splice(e,1,r),t(n,o),r})}function u(n,r){return f(n).then(o=>{const e=o.findIndex(i=>i._id===r);if(e<0)throw new Error(`Remove failed, cannot find entity with id: ${r} in: ${n}`);o.splice(e,1),t(n,o)})}function t(n,r){localStorage.setItem(n,JSON.stringify(r))}function d(n=5){for(var r="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=0;e<n;e++)r+=o.charAt(Math.floor(Math.random()*o.length));return r}export{h as s};
